<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>{% block title %}I.B.U. Dashboard{% endblock %}</title>

    <link
      rel="icon"
      type="image/svg+xml"
      href="{{ url_for('static', filename='ibu-icon.svg') }}"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      rel="preload"
      as="image"
      href="{{ url_for('static', filename='ibu-icon.svg') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='tailwind.css') }}"
    />

    <style>
      /* Particles */

      @keyframes particleFloat {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
          opacity: 0.6;
        }
        50% {
          transform: translateY(-20px) rotate(180deg);
          opacity: 1;
        }
      }
      .particle {
        position: absolute;
        background: rgba(224, 97, 80, 0.6);
        border-radius: 9999px;
        animation: particleFloat 6s infinite ease-in-out;
      }
    </style>

    {% block head %}{% endblock %}
  </head>

  <body
    class="relative m-0 min-h-screen overflow-x-hidden flex flex-col bg-linear-to-br from-[#1a1a1a] to-[#2d2d2d] font-sans text-white"
  >
    <div
      id="particles"
      class="pointer-events-none fixed inset-0 z-0"
      aria-hidden="true"
    ></div>

    <div class="relative z-10 flex min-h-screen flex-col">
      {% include "header.html" %}
      <main class="flex-1 flex items-center justify-center">
        {% block content %}{% endblock %}
      </main>

      <footer>{% include "footer.html" %}</footer>
    </div>

    <script>
      (function () {
        function createParticles(container) {
          const particleCount = 50;

          for (let i = 0; i < particleCount; i++) {
            const particle = document.createElement("div");
            particle.className = "particle";

            const size = Math.random() * 4 + 2;
            particle.style.width = size + "px";
            particle.style.height = size + "px";

            particle.style.left = Math.random() * 100 + "%";
            particle.style.top = Math.random() * 100 + "%";

            particle.style.animationDelay = Math.random() * 6 + "s";
            particle.style.animationDuration = Math.random() * 3 + 4 + "s";

            container.appendChild(particle);
          }
        }

        document.addEventListener("DOMContentLoaded", function () {
          if (
            window.matchMedia &&
            window.matchMedia("(prefers-reduced-motion: reduce)").matches
          ) {
            return;
          }

          const container = document.getElementById("particles");
          if (!container) return;

          if (container.dataset.particlesInit === "1") return;
          container.dataset.particlesInit = "1";

          createParticles(container);
        });
      })();
    </script>
  </body>
</html>
